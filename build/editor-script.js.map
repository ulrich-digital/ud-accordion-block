{"version":3,"file":"editor-script.js","mappings":"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","sources":["webpack://accordion-block-ud/./src/js/edit.js","webpack://accordion-block-ud/./src/js/save.js","webpack://accordion-block-ud/external window [\"wp\",\"blockEditor\"]","webpack://accordion-block-ud/external window [\"wp\",\"components\"]","webpack://accordion-block-ud/external window [\"wp\",\"data\"]","webpack://accordion-block-ud/external window [\"wp\",\"element\"]","webpack://accordion-block-ud/external window [\"wp\",\"i18n\"]","webpack://accordion-block-ud/external window \"ReactJSXRuntime\"","webpack://accordion-block-ud/webpack/bootstrap","webpack://accordion-block-ud/webpack/runtime/compat get default export","webpack://accordion-block-ud/webpack/runtime/define property getters","webpack://accordion-block-ud/webpack/runtime/hasOwnProperty shorthand","webpack://accordion-block-ud/webpack/runtime/make namespace object","webpack://accordion-block-ud/./src/js/editor.js"],"sourcesContent":["import { __ } from \"@wordpress/i18n\";\nimport {\n\tuseBlockProps,\n\tInnerBlocks,\n\tInspectorControls,\n\tRichText,\n} from \"@wordpress/block-editor\";\nimport {\n\tToggleControl,\n\tFormTokenField,\n\tPanelBody\n} from \"@wordpress/components\";\nimport { Fragment, useState, useRef, useEffect } from \"@wordpress/element\";\nimport { useSelect } from \"@wordpress/data\";\n\nconst REST_NONCE = window.udAccordionBlockSettings?.nonce || \"\";\n\nexport default function Edit({ attributes, setAttributes, clientId }) {\n\tconst parentClientIds = useSelect(\n\t\t(select) =>\n\t\t\tselect(\"core/block-editor\").getBlockParentsByBlockName(\n\t\t\t\tclientId,\n\t\t\t\t\"ud/accordion-block\"\n\t\t\t),\n\t\t[clientId]\n\t);\n\n\tconst isTooDeep = parentClientIds.length > 1;\n\tuseEffect(() => {\n\t\tif (isTooDeep) {\n\t\t\tconsole.warn(\"⛔ Der Accordion-Block ist zu tief verschachtelt!\");\n\t\t}\n\t}, [parentClientIds]);\n\n\tif (isTooDeep) {\n\t\treturn (\n\t\t\t<div {...useBlockProps()} style={{ border: '1px solid #ccd0d4', borderRadius: '8px', padding: '1rem', background: '#f8f9f9' }}>\n\t\t\t\t<p style={{ color: '#555', fontSize: '16px', lineHeight: '1.5', margin: 0 }}>\n\t\t\t\t\tℹ️&nbsp;\n\t\t\t\t\t<strong>Hinweis:</strong> Aus redaktionellen Gründen ist nur eine einmalige Verschachtelung des Akkordeon-Blocks erlaubt.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst { title, initiallyOpen, tags = \"[]\" } = attributes;\n\tconst [isOpen, setIsOpen] = useState(() => initiallyOpen);\n\tconst richTextRef = useRef(null);\n\tconst contentRef = useRef(null);\n\n\tconst tagArray = (() => {\n\t\ttry {\n\t\t\treturn JSON.parse(tags);\n\t\t} catch {\n\t\t\treturn [];\n\t\t}\n\t})();\n\n\tconst [globalTags, setGlobalTags] = useState([]);\n\n\tuseEffect(() => {\n\t\tfetch(\"/wp-json/ud-shared/v1/tags\", {\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-WP-Nonce\": REST_NONCE,\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((tags) => {\n\n\t\t\t\tif (Array.isArray(tags)) {\n\t\t\t\t\tsetGlobalTags(tags);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.warn(\"Fehler beim Laden der Tags:\", err);\n\t\t\t});\n\t}, []);\n\n\tconst ALLOWED_BLOCKS = [\n\t\t\"core/heading\",\n\t\t\"core/paragraph\",\n\t\t\"core/list\",\n\t\t\"ud/accordion-block\",\n\t\t\"ud/link-block\",\n\t\t\"ud/contact-card-associations-music\",\n\t];\n\n\tconst blockProps = useBlockProps({\n\t\tclassName: `ud-accordion${isOpen ? \" is-open\" : \"\"}`,\n\t});\n\n\tconst handleToggle = (event) => {\n\t\tif (richTextRef.current?.contains(event.target)) return;\n\t\tsetIsOpen((prev) => !prev);\n\t};\n\n\tuseEffect(() => {\n\t\tif (!contentRef.current) return;\n\t\tconst el = contentRef.current;\n\n\t\tif (isOpen) {\n\t\t\tel.style.height = \"auto\";\n\t\t\tconst scrollHeight = el.scrollHeight;\n\t\t\tel.style.height = \"0px\";\n\t\t\tvoid el.offsetHeight;\n\t\t\tel.style.height = `${scrollHeight}px`;\n\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tel.style.height = \"auto\";\n\t\t\t}, 300);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t} else {\n\t\t\tconst currentHeight = el.scrollHeight;\n\t\t\tel.style.height = `${currentHeight}px`;\n\t\t\tvoid el.offsetHeight;\n\t\t\tel.style.height = \"0px\";\n\t\t}\n\t}, [isOpen]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title=\"Tags\" initialOpen={true}>\n<FormTokenField\n\tlabel=\"Tags hinzufügen\"\n\tvalue={tagArray}\n\tsuggestions={globalTags}\n\t__next40pxDefaultSize={true}\n\t__nextHasNoMarginBottom={true}\n\tonFocus={() => {\n\t\tconsole.log(\"🔁 Fokus → Tags nachladen\");\n\t\tfetch(\"/wp-json/ud-shared/v1/tags\", {\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"X-WP-Nonce\": REST_NONCE,\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((tags) => {\n\t\t\t\tif (Array.isArray(tags)) {\n\t\t\t\t\tconsole.log(\"📦 Aktualisierte Vorschläge:\", tags);\n\t\t\t\t\tsetGlobalTags(tags);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) =>\n\t\t\t\tconsole.warn(\"❌ Fehler beim Nachladen der Tags:\", err)\n\t\t\t);\n\n\t}}\n\tonChange={(newTags) => {\n\t\tsetAttributes({ tags: JSON.stringify(newTags) });\n\n\t\tnewTags.forEach((tag) => {\n\t\t\tif (!globalTags.includes(tag)) {\n\t\t\t\tfetch(\"/wp-json/ud-shared/v1/tags\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\"X-WP-Nonce\": REST_NONCE,\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ name: tag }),\n\t\t\t\t})\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((tags) => {\n\t\t\t\t\t\tif (Array.isArray(tags)) {\n\t\t\t\t\t\t\tsetGlobalTags(tags);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) =>\n\t\t\t\t\t\tconsole.warn(\"Tag konnte nicht gespeichert werden\", err)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}}\n/>\n\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t<div {...blockProps}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"ud-accordion__title\"\n\t\t\t\t\tonClick={handleToggle}\n\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"h3\"\n\t\t\t\t\t\tclassName=\"ud-accordion__toggle wp-block-heading\"\n\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t\tplaceholder={__(\"Details\", \"ud-accordion-block\")}\n\t\t\t\t\t\tonChange={(value) => setAttributes({ title: value })}\n\t\t\t\t\t\tallowedFormats={[]}\n\t\t\t\t\t\tref={richTextRef}\n\t\t\t\t\t\t__next40pxDefaultSize={true}\n\t\t\t\t\t/>\n\t\t\t\t\t<span className={`ud-accordion__icon${isOpen ? \" is-open\" : \"\"}`}>\n\t\t\t\t\t\t<i className=\"fa-sharp fa-solid fa-arrow-right-long\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={__(\"Standardmässig geöffnet anzeigen\", \"ud-accordion-block\")}\n\t\t\t\t\tchecked={initiallyOpen}\n\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\tsetAttributes({ initiallyOpen: value });\n\t\t\t\t\t\tsetIsOpen(value);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"ud-accordion__toggle-switch\"\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t/>\n\n\n\t\t\t\t<div className=\"ud-accordion__content\" ref={contentRef}>\n\t\t\t\t\t<div className=\"ud-accordion__content-inner\">\n<InnerBlocks\n    allowedBlocks={ udAccordionBlockSettings?.allowedBlocks || [] }\n/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n\n\n\n","import { useBlockProps, InnerBlocks, RichText } from \"@wordpress/block-editor\";\n\nconst slugify = (str) =>\n\tstr\n\t\t.normalize(\"NFKD\")\n\t\t.replace(/[\\u0300-\\u036f]/g, \"\")\n\t\t.toLowerCase()\n\t\t.replace(/[^a-z0-9]+/g, \"-\")\n\t\t.replace(/(^-|-$)+/g, \"\");\n\nexport default function save({ attributes }) {\n\tconst { title, initiallyOpen, tags = \"[]\" } = attributes;\n\n\t// 🔧 Richtig: tags ist ein String, wir parsen es\n\tconst tagArray = (() => {\n\t\ttry {\n\t\t\treturn JSON.parse(tags);\n\t\t} catch {\n\t\t\treturn [];\n\t\t}\n\t})();\n\n\tconst blockProps = useBlockProps.save({\n\t\tclassName: `ud-accordion${initiallyOpen ? \" is-open\" : \"\"}`,\n\t\t...(tagArray.length > 0 && {\n\t\t\t\"data-tags\": tags,\n\t\t\t\"data-tags-slug\": JSON.stringify(tagArray.map(slugify)),\n\t\t}),\n\t});\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t<div className=\"ud-accordion__title\">\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"h3\"\n\t\t\t\t\tclassName=\"ud-accordion__toggle wp-block-heading\"\n\t\t\t\t\tvalue={title}\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tclassName={`ud-accordion__icon${\n\t\t\t\t\t\tinitiallyOpen ? \" is-open\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t>\n\t\t\t\t\t<i className=\"fa-sharp fa-solid fa-arrow-right-long\"></i>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className=\"ud-accordion__content\">\n\t\t\t\t<div className=\"ud-accordion__content-inner\">\n\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * editor.js\n *\n * JavaScript für den Block-Editor (Gutenberg).\n * Wird ausschließlich im Backend geladen.\n *\n * Hinweis:\n * Diese Datei enthält editor-spezifische Interaktionen oder React-Komponenten.\n * Wird über webpack zu editor.js gebündelt und in block.json oder enqueue.php eingebunden.\n */\n\nimport edit from './edit';\nimport save from './save';\nimport metadata from '../../block.json';\n\nwp.blocks.registerBlockType(metadata.name, {\n    ...metadata,\n    edit,\n    save,\n});\n\n"],"names":["__","useBlockProps","InnerBlocks","InspectorControls","RichText","ToggleControl","FormTokenField","PanelBody","Fragment","useState","useRef","useEffect","useSelect","jsx","_jsx","jsxs","_jsxs","REST_NONCE","window","udAccordionBlockSettings","nonce","Edit","attributes","setAttributes","clientId","parentClientIds","select","getBlockParentsByBlockName","isTooDeep","length","console","warn","style","border","borderRadius","padding","background","children","color","fontSize","lineHeight","margin","title","initiallyOpen","tags","isOpen","setIsOpen","richTextRef","contentRef","tagArray","JSON","parse","globalTags","setGlobalTags","fetch","headers","then","res","json","Array","isArray","catch","err","ALLOWED_BLOCKS","blockProps","className","handleToggle","event","current","contains","target","prev","el","height","scrollHeight","offsetHeight","timeout","setTimeout","clearTimeout","currentHeight","initialOpen","label","value","suggestions","__next40pxDefaultSize","__nextHasNoMarginBottom","onFocus","log","onChange","newTags","stringify","forEach","tag","includes","method","body","name","onClick","cursor","tagName","placeholder","allowedFormats","ref","checked","allowedBlocks","slugify","str","normalize","replace","toLowerCase","save","map","Content","edit","metadata","wp","blocks","registerBlockType"],"sourceRoot":""}